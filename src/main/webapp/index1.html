<!DOCTYPE html>
<html ng-app="Aplicativo">
    <head>
        <title>Papal√©guas Corrida</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <script src="resources/angular.js"></script>
        <script>
            angular.module("Aplicativo",[]);
            angular.module("Aplicativo").value('urlUse','http://localhost:8080/Papaleguas/app/')
                .controller("CorridaCtrl", function ($scope, $http, urlUse){
                    $scope.bairros = [];
                    $scope.corrida = undefined;
                    $scope.dados = undefined;

                    $scope.novo = function(){
                      $scope.corrida = {};
                    };

                    $scope.atualizaGrafo = function () {

                    };

                    $scope.pegaBairros = function () {
                        alert = ("Chegou no pega Bairros!");
                        $http({
                            method:'GET',
                            url: urlUse+"corrida/"
                        }).then(function successCallback(response){
                            $scope.bairros = response.data;
                        }),then (function errorCallback(response){
                            $scope.erro();
                        });
                    };

                    $scope.calcular = function (){};

                    $scope.alterar = function(){};

                    $scope.erro = function(){
                        console.log("Deu ruim!");
                    };
/*
                    $scope.activate = function (){
                        $scope.pegaBairros();
                        $scope.atualizaGrafo();
                    };

                    $scope.activate();*/
                });
        </script>
    </head>
    <body style="background-color: #0ed356">
        <img id="imagem" src="bb26.png" width="40" height="70" alt="bb26"/>
        <label style="vertical-align: top">
            <font size='20'>
            Papaleguas Corrida!
            </font>
        </label>
        
        <div ng-controller="CorridaCtrl">
            <div style="border:2px solid black">
                <h1>GRAFO!!</h1>
            </div>
            <div ng-show="!corrida">                
                {{pegaBairros()}}
                <button type="button" ng-click="novo()">Novo</button>
            </div>
            <div style="background-color: skyblue" ng-show="corrida">
                <h4>Selecione a origem e o destino</h4>
                Origem
                <select id="origemList" ng-repeat="bairroOrigem in bairros">
                    <option>{{bairroOrigem}}</option>
                </select>
                Destino
                <select id="destinoList" ng-repeat="bairroDestino in bairros">
                    <option>{{bairroDestino}}</option>
                </select>
                <button type="button" ng-click="calcular(bairroOrigem,bairroDestino)">Calcular</button>
                <button type="button" ng-click="corrida=undefined">Cancelar</button>
            </div>
            <div ng-show="dados">
                <h4>Detalhes</h4>
                Distancia: <input type="text" id="txtDist" ng-model="corrida.distancia" disabled="true">
                Tempo: <input type="text" id="txtTempo" ng-model="corrida.tempo">
                Valor: <input type="number" id="txtDist" ng-model="corrida.valor">
                <br><button type="button" ng-click="alterar()">Alterar Dados</button>
            </div>
        </div>
    </body>
</html>